<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Map tree tags by status, showing four subquadrats per plot-page. — map_tag â€¢ map</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">map</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Functions Index</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../articles/index.html">Turorials</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Apps
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://bookdown.org/forestgeoguest/map_tag_app">Map tree tags for fieldwork</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">news</a>
</li>
<li>
  <a href="https://github.com/maurolepore">
    <span class="fa fa-gavel"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/forestgeo/map">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://forestgeo.github.io/fgeo/">fgeo</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Map tree tags by status, showing four subquadrats per plot-page.</h1>
    </div>

    
    <p>This function maps tree tags by status. Each map shows four subquadrats
within a quadrat.</p>
    

    <pre class="usage"><span class='fu'>map_tag</span>(<span class='no'>vft</span>, <span class='kw'>x_q</span> <span class='kw'>=</span> <span class='fl'>20</span>, <span class='kw'>x_sq</span> <span class='kw'>=</span> <span class='fl'>5</span>, <span class='kw'>y_q</span> <span class='kw'>=</span> <span class='no'>x_q</span>, <span class='kw'>y_sq</span> <span class='kw'>=</span> <span class='no'>x_sq</span>,
  <span class='kw'>site_name</span> <span class='kw'>=</span> <span class='st'>"Site Name, YYYY"</span>, <span class='kw'>point_shape</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>19</span>, <span class='fl'>4</span>), <span class='kw'>point_size</span> <span class='kw'>=</span> <span class='fl'>1.5</span>,
  <span class='kw'>tag_size</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>header</span> <span class='kw'>=</span> <span class='fu'><a href='get_header.html'>get_header</a></span>(), <span class='kw'>theme</span> <span class='kw'>=</span> <span class='fu'><a href='get_theme.html'>get_theme</a></span>(),
  <span class='kw'>extend_grid</span> <span class='kw'>=</span> <span class='fl'>0</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>vft</th>
      <td><p>A ViewFullTable.</p></td>
    </tr>
    <tr>
      <th>x_q</th>
      <td><p>Size in meters of a quadrat's side. For ForestGEO sites, a
common value is 20.</p></td>
    </tr>
    <tr>
      <th>x_sq</th>
      <td><p>Size in meters of a subquadrat's side. For ForestGEO-CTFS sites, a
common value is 5.</p></td>
    </tr>
    <tr>
      <th>y_q</th>
      <td><p>Size in meters of a quadrat's side. For ForestGEO sites, a
common value is 20.</p></td>
    </tr>
    <tr>
      <th>y_sq</th>
      <td><p>Size in meters of a subquadrat's side. For ForestGEO-CTFS sites, a
common value is 5.</p></td>
    </tr>
    <tr>
      <th>site_name</th>
      <td><p>A string to use as a title.</p></td>
    </tr>
    <tr>
      <th>point_shape</th>
      <td><p>A vector of two numbers giving the shape of the points to
plot (see possible shapes in the documentation of ?<code><a href='http://www.rdocumentation.org/packages/graphics/topics/points'>graphics::points()</a></code>,
under the section entitled <em>'pch' values</em>).</p></td>
    </tr>
    <tr>
      <th>point_size</th>
      <td><p>A number giving points size. Passed to
<code><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_point'>ggplot2::geom_point()</a></code>.</p></td>
    </tr>
    <tr>
      <th>tag_size</th>
      <td><p>A number giving tag size. Passed to <code><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_point'>ggplot2::geom_point()</a></code>.</p></td>
    </tr>
    <tr>
      <th>header</th>
      <td><p>A string to use as a header (subtitle). To conveniently create
this header use <code><a href='get_header.html'>get_header()</a></code>.</p></td>
    </tr>
    <tr>
      <th>theme</th>
      <td><p>A <code><a href='http://www.rdocumentation.org/packages/ggplot2/topics/theme'>ggplot2::theme()</a></code>. To conveniently create this theme
use <code><a href='get_theme.html'>get_theme()</a></code>.</p></td>
    </tr>
    <tr>
      <th>extend_grid</th>
      <td><p>A number to adjust the extension of the minor and major
grid lines beyond the plot limits.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list of ggplots, where each element of the list is a map of tree
tags by status, showing four subquadrats.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>map_tag()</code> plots a status that refers to the tree -- not to each individual
stem. For a tree to plot as "dead", all its stems must be dead (for the
selected census); else the tree will plot as "alive".</p>
<p>From all censuses, this function will filter the one with greater numeric
value, and it will warn of such filtering. That is because most likely you
want information of the tree <code>Status</code> from the last census only. If this is
not what you want, here are some solutions:</p><ul>
<li><p>If you want to map a different census: filter the census you want and feed
<code>map_tag()</code> with the filtered data set.</p></li>
<li><p>If you want to lump trees accross multiple censuses, filter all the threes
that you want and change the value of <code>CensusID</code> so that all trees have the
same value of <code>CensusID</code>. Then feed <code>map_tag()</code> with the filtered data set.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="acknowledgements"><a class="anchor" href="#acknowledgements"></a>Acknowledgements</h2>

    
    <p>Useful ideas and guidance came from Suzanne Lao, Stuart Davis, Shameema
Jafferjee Esufa, David Kenfack and Anudeep Singh. Andudeep Sinh also wrote
the algorithm to calculate subquadrats.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='http://www.rdocumentation.org/packages/graphics/topics/points'>graphics::points()</a></code>, <code><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_point'>ggplot2::geom_point()</a></code>, <code><a href='http://www.rdocumentation.org/packages/ggplot2/topics/theme'>ggplot2::theme()</a></code>
<code><a href='get_header.html'>get_header()</a></code>, <code><a href='get_theme.html'>get_theme()</a></code>, <code><a href='add_subquadrat.html'>add_subquadrat()</a></code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='fu'>library</span>(<span class='no'>dplyr</span>)
<span class='fu'>library</span>(<span class='no'>ggplot2</span>)
<span class='fu'>library</span>(<span class='no'>map</span>)

<span class='co'># Subset of a public ViewFullTable from BCI (source:</span>
<span class='co'># https://repository.si.edu/handle/10088/20925).</span>

<span class='co'># Improve printing method</span>
<span class='no'>vft</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://dplyr.tidyverse.org/reference/reexports.html'>as_tibble</a></span>(<span class='no'>bci12vft_mini</span>)
<span class='no'>vft</span>

<span class='co'># Filter the plot you want to map</span>
<span class='no'>vft1</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='http://dplyr.tidyverse.org/reference/filter.html'>filter</a></span>(<span class='no'>vft</span>, <span class='no'>PlotID</span> <span class='kw'>==</span> <span class='fl'>1</span>)

<span class='co'># Another look</span>
<span class='fu'><a href='http://dplyr.tidyverse.org/reference/reexports.html'>glimpse</a></span>(<span class='no'>vft1</span>)

<span class='co'># This data set has two wrong names that need to be fixed before using map_tag()</span>
<span class='no'>vft1_rnm</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='http://dplyr.tidyverse.org/reference/select.html'>rename</a></span>(<span class='no'>vft1</span>, <span class='kw'>qx</span> <span class='kw'>=</span> <span class='no'>x</span>, <span class='kw'>qy</span> <span class='kw'>=</span> <span class='no'>y</span>)
<span class='no'>maps</span> <span class='kw'>&lt;-</span> <span class='fu'>map_tag</span>(<span class='no'>vft1_rnm</span>)

<span class='co'># Plotting only one map to screen</span>
<span class='no'>maps</span>[<span class='fl'>1</span>]

<span class='co'># Printing only maps 1-4 to a .pdf</span>
<span class='fu'>pdf</span>(<span class='st'>"default-map.pdf"</span>, <span class='kw'>paper</span> <span class='kw'>=</span> <span class='st'>"letter"</span>, <span class='kw'>height</span> <span class='kw'>=</span> <span class='fl'>10.5</span>, <span class='kw'>width</span> <span class='kw'>=</span> <span class='fl'>8</span>)
<span class='no'>maps</span>[<span class='fl'>1</span>:<span class='fl'>4</span>]
<span class='fu'>dev.off</span>()

<span class='co'># Common customization (printing only 1 map to screen)</span>
<span class='fu'>map_tag</span>(<span class='no'>vft1_rnm</span>,
        <span class='kw'>site_name</span> <span class='kw'>=</span> <span class='st'>"BCI 2012"</span>, <span class='kw'>point_size</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>point_shape</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>17</span>, <span class='fl'>6</span>), <span class='kw'>tag_size</span> <span class='kw'>=</span> <span class='fl'>5</span>
)[<span class='fl'>1</span>]

<span class='co'># Custom header</span>
<span class='fu'>map_tag</span>(<span class='no'>vft1_rnm</span>, <span class='kw'>site_name</span> <span class='kw'>=</span> <span class='st'>"BCI 2012"</span>,
        <span class='kw'>header</span> <span class='kw'>=</span> <span class='st'>"Line 1: _________\nLine 2:\nLine 3:....................."</span>
)[<span class='fl'>1</span>]

<span class='co'># Maybe easier</span>
<span class='no'>your_header</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='get_header.html'>get_header</a></span>(
  <span class='kw'>line1</span> <span class='kw'>=</span> <span class='st'>"Your header-line 1: _____________________________"</span>,
  <span class='kw'>line2</span> <span class='kw'>=</span> <span class='st'>"Your header-line 3: _____________________________"</span>,
  <span class='kw'>line3</span> <span class='kw'>=</span> <span class='st'>"Your header-line 2: _____________________________"</span>
)
<span class='fu'>map_tag</span>(<span class='no'>vft1_rnm</span>, <span class='kw'>site_name</span> <span class='kw'>=</span> <span class='st'>"BCI 2012"</span>, <span class='kw'>header</span> <span class='kw'>=</span> <span class='no'>your_header</span>)[<span class='fl'>1</span>]

<span class='co'># Custom theme: using a pre-made theme</span>
<span class='co'># Allow using pre-made themes (e.g. ggplot2::theme_bw()) and building custom</span>
<span class='co'># themes (with ggplot::theme()).</span>
<span class='fu'>library</span>(<span class='no'>ggplot2</span>)

<span class='fu'>map_tag</span>(<span class='no'>vft1_rnm</span>, <span class='kw'>site_name</span> <span class='kw'>=</span> <span class='st'>"BCI 2012"</span>, <span class='kw'>theme</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggtheme'>theme_gray</a></span>())[<span class='fl'>1</span>]

<span class='co'># Custom theme: using a pre-made theme</span>
<span class='co'># An extreeme example to show that themes are extreemely flexible</span>
<span class='no'>your_theme</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>ggplot2</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/theme'>theme</a></span>(
  <span class='kw'>legend.position</span> <span class='kw'>=</span> <span class='st'>"bottom"</span>,
  <span class='kw'>legend.title</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/element'>element_blank</a></span>(),
  <span class='kw'>legend.text</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/element'>element_text</a></span>(<span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>8</span>, <span class='kw'>colour</span> <span class='kw'>=</span> <span class='st'>"red"</span>),
  <span class='kw'>text</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/element'>element_text</a></span>(<span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>11</span>, <span class='kw'>face</span> <span class='kw'>=</span> <span class='st'>"bold.italic"</span>, <span class='kw'>colour</span> <span class='kw'>=</span> <span class='st'>"white"</span>),
  <span class='kw'>plot.background</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/element'>element_rect</a></span>(<span class='kw'>fill</span> <span class='kw'>=</span> <span class='st'>"black"</span>),
  <span class='kw'>plot.margin</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/element'>margin</a></span>(<span class='fl'>2</span>, <span class='fl'>2</span>, <span class='fl'>2</span>, <span class='fl'>2</span>, <span class='st'>"cm"</span>),
  <span class='kw'>strip.background</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/element'>element_rect</a></span>(<span class='kw'>fill</span> <span class='kw'>=</span> <span class='st'>"darkgreen"</span>),
  <span class='kw'>strip.text</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/element'>element_text</a></span>(<span class='kw'>colour</span> <span class='kw'>=</span> <span class='st'>"white"</span>),
  <span class='co'># make grid to dissapear by matching background colour</span>
  <span class='kw'>panel.background</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/element'>element_rect</a></span>(<span class='kw'>fill</span> <span class='kw'>=</span> <span class='st'>"lightgreen"</span>),
  <span class='kw'>panel.grid.minor</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/element'>element_line</a></span>(<span class='kw'>colour</span> <span class='kw'>=</span> <span class='st'>"black"</span>, <span class='kw'>linetype</span> <span class='kw'>=</span> <span class='st'>"dotted"</span>),
  <span class='kw'>panel.grid.major</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/element'>element_line</a></span>(<span class='kw'>colour</span> <span class='kw'>=</span> <span class='st'>"black"</span>)
)
<span class='fu'>map_tag</span>(<span class='no'>vft1_rnm</span>, <span class='kw'>site_name</span> <span class='kw'>=</span> <span class='st'>"BCI 2012"</span>, <span class='kw'>theme</span> <span class='kw'>=</span> <span class='no'>your_theme</span>)[<span class='fl'>1</span>]

<span class='co'># Adapting the dimensions of quadrat and subquadrat to the range of qx and qy</span>
<span class='co'># Creating new data set with qx and qy ranging 0-100</span>
<span class='no'>smaller</span> <span class='kw'>&lt;-</span> <span class='no'>vft1_rnm</span>
<span class='no'>n</span> <span class='kw'>&lt;-</span> <span class='fu'>nrow</span>(<span class='no'>smaller</span>)
<span class='no'>smaller</span>$<span class='no'>qx</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://dplyr.tidyverse.org/reference/sample.html'>sample</a></span>(<span class='fl'>0</span>:<span class='fl'>10</span>, <span class='no'>n</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>smaller</span>$<span class='no'>qy</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://dplyr.tidyverse.org/reference/sample.html'>sample</a></span>(<span class='fl'>0</span>:<span class='fl'>10</span>, <span class='no'>n</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>map_tag</span>(<span class='no'>smaller</span>, <span class='kw'>x_q</span> <span class='kw'>=</span> <span class='fl'>10</span>, <span class='kw'>x_sq</span> <span class='kw'>=</span> <span class='fl'>2.5</span>)[<span class='fl'>1</span>]
<span class='co'># If limit-lines aren't visible, try extending the grid a little</span>
<span class='fu'>map_tag</span>(<span class='no'>smaller</span>, <span class='kw'>x_q</span> <span class='kw'>=</span> <span class='fl'>10</span>, <span class='kw'>x_sq</span> <span class='kw'>=</span> <span class='fl'>2.5</span>, <span class='kw'>extend_grid</span> <span class='kw'>=</span> <span class='fl'>0.25</span>)[<span class='fl'>1</span>]
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#acknowledgements">Acknowledgements</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/maurolepore'>Mauro Lepore</a>, <a href='http://www.forestgeo.si.edu/'>CTFS-ForestGEO</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
